CREATE TABLE USUARIO_XXX(ID_USUARIO INTEGER, NOMBRE VARCHAR2(80),EDAD INTEGER);

/*CREAMOS EL DISPARADOR*/

CREATE OR REPLACE TRIGGER disparador_usuario_xx BEFORE INSERT ON usuario_xxx FOR EACH ROW
BEGIN
IF :NEW.EDAD < 18 THEN
RAISE_APPLICATION_ERROR(-20001,'LO SIENTO ERES MUY PEQUEÑO');
END IF;
END;
/

-- PROBAMOS CON UN INSERT

INSERT INTO USUARIO_XXX(EDAD) VALUES(20);

SELECT * FROM USUARIO_XXX;

INSERT INTO USUARIO_XXX(NOMBRE) VALUES('EL');
 



CREATE OR REPLACE TRIGGER disparador_usuario_xx BEFORE INSERT ON usuario_xxx FOR EACH ROW
BEGIN
IF :NEW.EDAD < 18 OR LENGTH (:NEW.NOMBRE)<4 THEN
RAISE_APPLICATION_ERROR(-20001,'LO SIENTO ERES MUY PEQUEÑO');
END IF;
END;
/


--EJERCICIO NO.2 DISPARADOR DE TIPO AFTER

CREATE TABLE REGISTRO (ID INTEGER, EMAIL VARCHAR2(60), EDAD INTEGER);
CREATE TABLE REGISTRO_MENOR (ID INTEGER, EMAIL VARCHAR2(60), EDAD INTEGER);
CREATE TABLE REGISTRO_MAYOR (ID INTEGER, EMAIL VARCHAR2(60), EDAD INTEGER);
DROP TABLE REGISTRO;

--CREAMOS EL DISPARADOR DE TIPO AFTER 
CREATE OR REPLACE TRIGGER disparador_registro AFTER INSERT ON registro FOR EACH ROW
BEGIN
IF :NEW.EDAD <18 THEN
INSERT INTO REGISTRO_MENOR VALUES(:NEW.ID,:NEW.EMAIL,:NEW.EDAD);
ELSE 
INSERT INTO REGISTRO_MAYOR VALUES(:NEW.ID,:NEW.EMAIL,:NEW.EDAD);
END IF;
END;
/

  INSERT INTO REGISTRO VALUES(2,'REPRO',16);
SELECT * FROM REGISTRO;
SELECT * FROM REGISTRO_MENOR;
SELECT * FROM REGISTRO_MAYOR;
